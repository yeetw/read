<script>
  document.addEventListener('DOMContentLoaded', () => {
    const searchEle = document.getElementById('search');
    const inputEle = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    searchButton.addEventListener('click', (e) => {
      const isExpanded = searchEle.classList.contains('search--expanded');
      if (!isExpanded) {
        inputEle.focus();
      }
      searchEle.classList.toggle('search--expanded');
    });
    inputEle.addEventListener('change', (e) => {
      const filter = e.target.value.toLowerCase();
      const lis = document.getElementsByTagName('li');
      for (var i = 0; i < lis.length; i++) {
        let name = lis[i].innerText.toLowerCase();
        let isbn = lis[i].getAttribute('isbn');
        let star = lis[i].getAttribute('star');
        let date = lis[i].getAttribute('date');
        if (filter == 'star') {
          /* Show only starred books. */
          if (star == 'true') {
            lis[i].style.display = 'list-item';
          } else {
            lis[i].style.display = 'none';
          }
        } else {
          /* Filter by name or date or ISBN. */
          if (name.indexOf(filter) == -1 && isbn.indexOf(filter) == -1 && date.indexOf(filter) == -1) {
            lis[i].style.display = 'none';
          } else {
            lis[i].style.display = 'list-item';
          }
        }
      }
      /* Hide year total number if search input is not empty. */
      const yearTotal = document.getElementsByClassName('year-total');
      for (var i = 0; i < yearTotal.length; i++) {
        if (filter == '') {
          yearTotal[i].style.display = 'inline';
        } else {
          yearTotal[i].style.display = 'none';
        }
      }
    });
  });
</script>

<div class="searchbox">
  <div class="search" id="search">
    <input type="text" class="search__input" id="searchInput" placeholder="" />
    <button class="search__button" id="searchButton">
      <svg class="search__icon" focusable="false" viewBox="0 0 24 24">
        <path
          d="M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z M23.5,23.5 l-5.929-5.929">
        </path>
      </svg>
    </button>
  </div>
</div>